specVersion: 0.0.5
description: Subgraph for the WOW token vesting contract
repository: https://github.com/wealth-of-wisdom/wow-contracts
schema:
    file: ./schema.graphql
dataSources:
{{#includeVesting}}
    - kind: ethereum/contract
      name: Vesting
      network: {{network}}
      source:
          address: "{{vestingAddress}}"
          abi: Vesting
          startBlock: {{startBlock}}
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.7
          language: wasm/assemblyscript
          file: ./src/mappings/vesting.ts
          entities:
              - VestingPool
              - Beneficiary
          abis:
            - name: Vesting
              file: ./abis/Vesting.json
          eventHandlers:
            - event: Initialized(uint64)
              handler: handleInitialized
            - event: VestingPoolAdded(indexed uint16,uint256)
              handler: handleVestingPoolAdded
            - event: BeneficiaryAdded(indexed uint16,indexed address,uint256)
              handler: handleBeneficiaryAdded
            - event: BeneficiaryRemoved(indexed uint16,indexed address,uint256)
              handler: handleBeneficiaryRemoved
            - event: ContractTokensWithdrawn(indexed address,indexed address,uint256)
              handler: handleContractTokensWithdrawn
            - event: ListingDateChanged(uint32,uint32)
              handler: handleListingDateChanged
            - event: StakedTokensUpdated(indexed uint16,indexed address,uint256,bool)
              handler: handleStakedTokensUpdated
            - event: StakingContractSet(indexed address)
              handler: handleStakingContractSet
            - event: TokensClaimed(indexed uint16,indexed address,uint256)
              handler: handleTokensClaimed
{{/includeVesting}}
    - kind: ethereum/contract
      name: Nft
      network: {{network}}
      source:
        address: "{{nftAddress}}"
        abi: Nft
        startBlock: {{startBlock}}
      mapping:
        kind: ethereum/events
        apiVersion: 0.0.7
        language: wasm/assemblyscript
        file: ./src/mappings/nft.ts
        entities:
            - NftContract
            - Nft
            - User
        abis:
          - name: Nft
            file: ./abis/Nft.json
        eventHandlers:
        - event: Initialized(uint64)
          handler: handleInitialized
        - event: NftMinted(indexed address,indexed uint256,uint16,bool,uint256)
          handler: handleNftMinted
        - event: NftDataActivated(indexed address,indexed uint256,uint16,bool,uint256,uint256)
          handler: handleNftActivation
      
    - kind: ethereum/contract      
      name: Staking
      network: {{network}}
      source:
          address: "{{stakingAddress}}"
          abi: Staking
          startBlock: {{startBlock}}
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.7
          language: wasm/assemblyscript
          file: ./src/mappings/staking.ts
          entities:
              - Pool
              - Band
              - FundDistribution
          abis:
            - name: Staking
              file: ./abis/Staking.json
          eventHandlers:
            - event: Initialized(uint64)
              handler: handleInitialized
            - event: AllRewardsClaimed(address)
              handler: handleAllRewardsClaimed
            - event: BandDowngraded(address,uint256,uint16,uint16)
              handler: handleBandDowngraded
            # - event: BandLevelSet(uint16,uint256,uint16[])
            #   handler: handleBandLevelSet
            - event: BandStaked(address,uint16,uint256)
              handler: handleBandStaked
            - event: BandUnstaked(address,uint16,uint256)
              handler: handleBandUnstaked
            - event: BandUpgaded(address,uint256,uint16,uint16)
              handler: handleBandUpgaded
            - event: FundsDistributed(address,uint256)
              handler: handleFundsDistributed
            # - event: PoolSet(uint16,uint48)
            #   handler: handlePoolSet
            - event: RewardsClaimed(address,address,uint256)
              handler: handleRewardsClaimed
            - event: SharesInMonthSet(uint48[])
              handler: handleSharesInMonthSet
            - event: Staked(address,uint16,uint8,bool)
              handler: handleStaked
            - event: TokensWithdrawn(address,address,uint256)
              handler: handleTokensWithdrawn
            - event: TotalBandLevelsAmountSet(uint16)
              handler: handleTotalBandLevelsAmountSet
            - event: TotalPoolAmountSet(uint16)
              handler: handleTotalPoolAmountSet
            - event: Unstaked(address,uint256,bool)
              handler: handleUnstaked
            # - event: Upgraded(address)
            #   handler: handleUpgraded
            - event: VestingUserRemoved(address)
              handler: handleVestingUserRemoved

